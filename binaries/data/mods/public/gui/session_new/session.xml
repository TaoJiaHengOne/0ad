<?xml version="1.0" encoding="utf-8"?>

<objects>

	<script file="gui/common/functions_global_object.js" />
	<script file="gui/session_new/session.js"/>
	<script file="gui/session_new/selection.js"/>
	<script file="gui/session_new/input.js"/>
	<script file="gui/session_new/music.js"/>

	<object name="sn" hotkey="session.gui.toggle">
		<action on="Tick">
			onTick();
		</action>

		<action on="SimulationUpdate">
			onSimulationUpdate();
		</action>

		<action on="Press">
			this.hidden = !this.hidden;
		</action>
		
		<!-- Exit button -->
		<object type="button" style="wheatExit"
			size="100%-16 0 100% 16"
			tooltip_style="snToolTip"
			tooltip="Exit game"
			hotkey="leave"
		>
			<action on="Press"><![CDATA[
				messageBox(400, 200, "Do you really want to quit?", "Confirmation", 0,
					["Yes", "No!"], [leaveGame, null]);
			]]></action>
		</object>

		<!-- Dev/cheat commands -->
		<object size="100%-170 32 100%-16 128" type="image" sprite="devCommandsBackground">
			<object size="0 0 100%-18 16" type="text" style="devCommandsText">Control all units</object>
			<object size="100%-16 0 100% 16" type="checkbox" name="devControlAll" style="wheatCrossBox"/>

			<object size="0 16 100%-18 32" type="text" style="devCommandsText">Display selection state</object>
			<object size="100%-16 16 100% 32" type="checkbox" name="devDisplayState" style="wheatCrossBox"/>

			<object size="0 32 100%-18 48" type="text" style="devCommandsText">Pathfinder overlay</object>
			<object size="100%-16 32 100% 48" type="checkbox" style="wheatCrossBox">
				<action on="Press">Engine.GuiInterfaceCall("SetPathfinderDebugOverlay", this.checked);</action>
			</object>

			<object size="0 48 100%-18 64" type="text" style="devCommandsText">Obstruction overlay</object>
			<object size="100%-16 48 100% 64" type="checkbox" style="wheatCrossBox">
				<action on="Press">Engine.GuiInterfaceCall("SetObstructionDebugOverlay", this.checked);</action>
			</object>

			<object size="0 64 100%-18 80" type="text" style="devCommandsText">Unit motion overlay</object>
			<object size="100%-16 64 100% 80" type="checkbox" style="wheatCrossBox">
				<action on="Press">g_Selection.SetMotionDebugOverlay(this.checked);</action>
			</object>

			<object size="0 80 100%-18 96" type="text" style="devCommandsText">Toggle music</object>
			<object size="100%-16 80 100% 96" type="checkbox" style="wheatCrossBox" checked="true" hotkey="music.toggle">
				<action on="Press">if (this.checked) startMusic(); else stopMusic();</action>
			</object>
		</object>

		<!-- Debug text -->
		<object name="debug"
			type="text"
			size="0 50 50% 100%"
			ghost="true"
			textcolor="yellow"
			font="console"
		/>

		<!-- Player resource bar -->
		<object
			size="50%-200 0 50%+200 30"
			type="image"
			style="goldPanelFrilly"
		>

			<!-- Food -->
			<object size="0 0 18% 100%" type="image" style="resourceCounter" tooltip="Food">
				<object size="0 0 28 28" type="image" style="resourceIcon" cell_id="0"/>
				<object size="24 4 100% 32" type="text" style="resourceText" name="resourceFood"/>
			</object>

			<!-- Wood -->
			<object size="18% 0 36% 100%" type="image" style="resourceCounter" tooltip="Wood">
				<object size="0 0 28 28" type="image" style="resourceIcon" cell_id="1"/>
				<object size="24 4 100% 32" type="text" style="resourceText" name="resourceWood"/>
			</object>

			<!-- Stone -->
			<object size="36% 0 54% 100%" type="image" style="resourceCounter" tooltip="Stone">
				<object size="0 0 28 28" type="image" style="resourceIcon" cell_id="2"/>
				<object size="24 4 100% 32" type="text" style="resourceText" name="resourceStone"/>
			</object>

			<!-- Metal -->
			<object size="54% 0 72% 100%" type="image" style="resourceCounter" tooltip="Metal">
				<object size="0 0 28 28" type="image" style="resourceIcon" cell_id="3"/>
				<object size="24 4 100% 32" type="text" style="resourceText" name="resourceMetal"/>
			</object>

			<!-- Population -->
			<object size="72% 0 100% 100%" type="image" style="resourceCounter" tooltip="Population (current / maximum)">
				<object size="0 0 28 28" type="image" style="resourceIcon" cell_id="4"/>
				<object size="24 4 100% 32" type="text" style="resourceText" name="resourcePop"/>
			</object>

		</object>

		<!-- Bottom-left selected-unit details panel -->
		<object name="selectionDetails"
			type="image"
			style="goldPanel"
			size="0 100%-250 300 100%"
		>

			<!-- Big unit icon -->
			<object size="8 8 136 136">
				<object type="image" style="selectionDetailsIconOutline"/>
				<object type="image" name="selectionDetailsIcon" ghost="true"/>
			</object>

			<!-- Health bar -->
			<object size="8 138 136 144" type="image" name="selectionDetailsHealth" tooltip="Hitpoints" tooltip_style="snToolTip">
				<object type="image" sprite="selectionDetailsHealthBackground" ghost="true"/>
				<object type="image" sprite="selectionDetailsHealthForeground" ghost="true" name="selectionDetailsHealthBar"/>
			</object>

			<!-- Stamina bar -->
			<object size="8 146 136 152" type="image" name="selectionDetailsStamina" tooltip="Stamina" tooltip_style="snToolTip">
				<object type="image" sprite="selectionDetailsStaminaBackground" ghost="true"/>
				<object type="image" sprite="selectionDetailsStaminaForeground" ghost="true" name="selectionDetailsStaminaBar"/>
			</object>

			<!-- Details text -->
			<object size="136 6 100% 100%">
				<object size="0 0 100% 20" name="selectionDetailsSpecific" type="text" font="prospero18b"/>
				<object size="0 20 100% 40" name="selectionDetailsGeneric" type="text" font="prospero16"/>
				<object size="0 40 100% 60" name="selectionDetailsPlayer" type="text" font="prospero16" textcolor="blue"/>
			</object>

			<!-- Attack stats -->
			<object size="146 72 100% 130" type="image" tooltip="Attack strengths" tooltip_style="snToolTip">
				<object size="-4 -8 48 48" type="image" ghost="true" sprite="snIconSheetStance" cell_id="1"/>
				<object size="40 0 100% 100%" type="text" ghost="true" name="selectionDetailsAttack" font="tahoma12"/>
			</object>

			<!-- Armour stats -->
			<object size="146 130 100% 188" type="image" tooltip="Armour strengths" tooltip_style="snToolTip">
				<object size="-4 -4 48 48" type="image" ghost="true" sprite="snIconSheetStance" cell_id="3"/>
				<object size="40 0 100% 100%" type="text" ghost="true" name="selectionDetailsArmour" font="tahoma12"/>
			</object>

		</object>

		<!-- Bottom-middle selected-unit commands panel -->
		<object name="unitCommands"
			size="350 0 100%-300 100%-8"
		>

			<object name="unitConstructionPanel"
				style="goldPanelFrilly"
				size="0 100%-56 100% 100%"
				type="image"
			>
				<object size="-5 -2 59 62" type="image" sprite="snIconSheetTab" tooltip_style="snToolTip"
					 cell_id="0" tooltip="Construction"/>

				<object size="59 10 100% 47">
					<repeat count="16">
						<object name="unitConstructionButton[n]" hidden="true" style="iconButton" type="button" size="0 0 37 37">
							<object name="unitConstructionIcon[n]" type="image" ghost="true" size="3 3 35 35"/>
						</object>
					</repeat>
				</object>
			</object>

			<object name="unitStancePanel"
				style="goldPanelFrilly"
				size="0 100%-56 100% 100%"
				type="text"
			>
				<object size="-5 -2 59 62" type="image" sprite="snIconSheetTab" tooltip_style="snToolTip"
					 cell_id="4" tooltip="Stances"/>

				[stance commands]
			</object>

			<object name="unitFormationPanel"
				style="goldPanelFrilly"
				size="0 100%-56 100% 100%"
				type="text"
			>
				<object size="-5 -2 59 62" type="image" sprite="snIconSheetTab" tooltip_style="snToolTip"
					 cell_id="5" tooltip="Formations"/>

				[formation commands]
			</object>

			<object name="unitResearchPanel"
				style="goldPanelFrilly"
				size="0 100%-56 100% 100%"
				type="text"
			>
				<object size="-5 -2 59 62" type="image" sprite="snIconSheetTab" tooltip_style="snToolTip"
					 cell_id="1" tooltip="Research"/>

				[research commands]
			</object>

			<object name="unitTrainingPanel"
				style="goldPanelFrilly"
				size="0 100%-56 100% 100%"
				type="image"
			>
				<object size="-5 -2 59 62" type="image" sprite="snIconSheetTab" tooltip_style="snToolTip"
					 cell_id="2" tooltip="Training"/>

				<object size="59 10 100% 47">
					<repeat count="16">
						<object name="unitTrainingButton[n]" hidden="true" style="iconButton" type="button" size="0 0 37 37">
							<object name="unitTrainingIcon[n]" type="image" ghost="true" size="3 3 35 35"/>
						</object>
					</repeat>
				</object>
			</object>

			<object name="unitQueuePanel"
				style="goldPanelFrilly"
				size="0 100%-56 100% 100%"
				type="text"
			>
				<object size="-5 -2 59 62" type="image" sprite="snIconSheetTab" tooltip_style="snToolTip"
					 cell_id="3" tooltip="Production queue"/>

				<object size="59 10 100% 47">
					<repeat count="16">
						<object name="unitQueueButton[n]" hidden="true" style="iconButton" type="button" size="0 0 37 37">
							<object name="unitQueueIcon[n]" ghost="true" type="image" size="3 3 35 35"/>
							<object name="unitQueueCount[n]" ghost="true" style="iconButtonCount" type="text"/>
							<object name="unitQueueProgress[n]" ghost="true" style="iconButtonProgress" type="text"/>
						</object>
					</repeat>
				</object>
			</object>

		</object>

		<!-- Minimap -->
		<object	name="minimap">
			<object style="goldPanel"
				size="100%-246 100%-246 100% 100%"
				type="image"
			/>
			<object name="minimapDisplay"
				type="minimap"
				size="100%-206 100%-206 100%-6 100%-6"
			/>
		</object>

	</object>	

	<!-- Selection bandbox -->
	<object name="bandbox" type="image" sprite="bandbox" ghost="true" hidden="true"/>

</objects>
